# schema与数据类型
## 一、选择数据类型遵循几个简单的原则：
1.更小的通常更好，如只存0-200，则tinyint unsigned更好。更小的数据类型通常更快，因为占用更少磁盘、内存和cpu缓存，处理时的cpu周期也更少。

2.简单就好，简单数据类型的操作通常需要更少的cpu周期。如整型比字符操作代价更低，因为字符集和校对规（排序规则）使字符比较比整型比较更复杂。例子：用内建类型如datetime等存储日期和时间而不是字符串来存储，应该用整型存储ip地址。

3.尽量避免NULL，NULL列使得索引、索引统计和值比较都更复杂。

## 二、选型步骤：
1.选择大类型，字符串、数字还是时间。

2.选择具体类型，mysql许多数据类型可以存储相同的数据类型，如datetime和timestamp，时间和日期，精确到秒，然而timestamp只有datetime一半的存储空间，并且会根据时区变化，具有特殊的自更新能力。另一方面，timestamp存储的时间范围要小得多。

## 三、数据类型
### 1.整数类型
两种类型：整数和实数。

整数有TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT，分别是8，16，24，32，64位。可选UNSIGNED属性，表示不允许负值。

**注意：**`mysql可以为整数类型指定宽度，如INT(11)，对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定mysql的一些交互工具(如命令行客户端)用来显示字符的个数。对于存储和计算来说，INT(1)和INT(20)是相同的。`

### 2.实数类型
float 4个字节，double 8个字节，只是选择存储类型，mysql使用double作为内部浮点数计算的类型。

浮点和decimal都可以指定精度，如decimal(18, 9)小数点两边各存储9个数字，一共9个字节：小数点前4个字节，后4个字节，小数点1个字节。

### 3.字符串类型
varchar:变长字符串，额外1个字节（内容少于等于255字节）或2个字节（内容超过255字节）来存储字符串长度。
适合：最大长度比平均长度大很多；列更新较少，碎片不是问题；使用了像utf-8这样复杂的字符集，每个字符都使用不同的字节数进行存储。

mysql5.0以上会保留末尾空格。

char:定长。适合长度短的定长字符串存储，如md5。会截断末尾空格。

二进制字符串：binary、varbinary。填充使用\0（零字节）而不是空格，检索时不会去掉天充值。

BLOB和TEXT类型
blob：二进制大字符串数据。tinytext、（smalltext、text两个同义）、mediumtext、longtext;

TEXT：字符方式存储。tinyblob、（smallblob、blob两个同义）、mediumblob、longblob。

mysql只对两者列的最前max_sort_length字节做排序。

使用枚举（ENUM）代替字符串类型
内部存储的是数字，并且排序是按内部数字进行的。

### 4.日期和时间类型
datetime：1001年到9999年，精度秒。时区无关，8个字节存储。YYYYMMDDHHMMSS

timestamp：从1970年1月1日午夜以来的秒数。4个字节存储空间。范围较小，只能表示1970年到2038年。
### 5.位数据
bit\set
### 6.选择标识符（identifier）
很重要，可能经常检索以及作为关联键。

整数类型是最好的选择，很快而且可以使用auto_increment。

大部分情况下避免使用enum和set类型。
尽量避免字符串类型
### 7.特殊类型数据
如IP地址存储不应该使用varchar(15)，而应该使用无符号整数；INET_ATON()和INET_NTOA()函数两种表示方法做转换。

## 二、schema设计陷阱
太多的列

太多的关联

全能的枚举

## 三、范式和反范式
## 四、缓存表和汇总表
## 五、加快ALTER TABLE操作的速度
